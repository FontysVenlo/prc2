<!doctype html><html lang=en-us><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>PRC2</title>
<link rel=stylesheet href=https://fontysvenlo.github.io/prc2_web/css/main.min.5ae1ce83f36dd7d0a93ba6d9ee4db714707de61505e54a5a947f8df1d0fd4c5a06b8dadd3cb67ff17e6fc25d40c121e5408767b7699ea58860d20e28773c182e.css integrity="sha512-WuHOg/Nt19CpO6bZ7k23FHB95hUF5UpalH+N8dD9TFoGuNrdPLZ/8X5vwl1AwSHlQIdnt2mepYhg0g4odzwYLg==" crossorigin=anonymous>
<link rel=stylesheet href=https://fontysvenlo.github.io/prc2_web/css/highlight.9e5322c61da2ab0997ce2db01648537ffacdb7b808fc24af4d99ff51257c59db9500031551feb8e62cafde7a246ae2c0015c2862637519a22eb0b49fa7b9d2f9.css integrity="sha512-nlMixh2iqwmXzi2wFkhTf/rNt7gI/CSvTZn/USV8WduVAAMVUf645iyv3nokauLAAVwoYmN1GaIusLSfp7nS+Q==" crossorigin=anonymous>
<link rel=stylesheet href=https://fontysvenlo.github.io/prc2_web/css/fontawesome.18a15c01c2df9b660114c44bfe1cd143dc48faeea9d5bc11a5b70509d8ec85ae65ac4c6dab72eb09a5c4770d45d6a2d802d28924e739d852a37c1b14f3a9cc61.css integrity="sha512-GKFcAcLfm2YBFMRL/hzRQ9xI+u6p1bwRpbcFCdjsha5lrExtq3LrCaXEdw1F1qLYAtKJJOc52FKjfBsU86nMYQ==" crossorigin=anonymous>
<script src=/prc2_web/js/init-darkmode.min.09a600ce680e2f21da81abb6c4e0627a5bda42cf7e701bbc3fecdedf5fe0eaa6c82d32cf5c6dac1db60aa93e0d5550c19a6dd8218e6b57e8252979349467ac59.js integrity="sha512-CaYAzmgOLyHagau2xOBielvaQs9+cBu8P+ze31/g6qbILTLPXG2sHbYKqT4NVVDBmm3YIY5rV+glKXk0lGesWQ==" crossorigin=anonymous></script>
</head><body class="antialiased text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800"><header class="sticky top-0 z-40 w-full flex-none lg:border-b lg:border-gray-900/10 dark:border-gray-50/[0.06] bg-white dark:bg-gray-800">
<div class="max-w-8xl mx-auto">
<div class="py-4 border-b border-slate-900/10 lg:px-8 lg:border-0 dark:border-slate-300/10 mx-4 lg:mx-0">
<div class="relative flex items-center">
<a class="mr-3 flex-none overflow-hidden md:w-auto" href=/>
<span class=sr-only>PRC2</span>PRC2
</a>
<div class="relative flex ml-auto">
<nav class="hidden lg:flex items-center text-sm leading-6 font-semibold text-gray-700 dark:text-gray-200">
<ul class="flex space-x-8">
<li>
<a href=https://fontysvenlo.github.io/prc2_web/pages/tips/ class="hover:text-sky-500 dark:hover:text-sky-400">Tips</a>
</li>
<li>
<a href=https://fontysvenlo.github.io/prc2_web/pages/setup/ class="hover:text-sky-500 dark:hover:text-sky-400">Setup</a>
</li>
</ul>
</nav>
<div class="flex items-center lg:border-l border-gray-200 ml-6 pl-6 dark:border-gray-700">
<button type=button id=theme-toggle>
<span class="dark:hidden hover:text-sky-500"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span>
<span class="hidden dark:inline hover:text-sky-400"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
</button>
<a href=https://github.com/FontysVenlo/prc2_web class="ml-6 block hover:text-sky-500 dark:hover:text-sky-400"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</div>
</div>
</div>
</div>
<div class="flex items-center p-4 border-b border-slate-900/10 lg:hidden dark:border-slate-50/[0.06]">
<button id=menu-toggle type=button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
<span class=sr-only>Navigation</span><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</button>
</div>
</div>
</header><div class="max-w-8xl mx-auto px-4 sm:px-6 md:px-8"><aside id=menu class="hidden lg:block fixed z-20 inset-0 top-[6.75rem] lg:top-[3.8125rem] left-[max(0px,calc(50%-45rem))] right-auto w-[19.5rem] pb-10 px-8 overflow-y-auto bg-white dark:bg-gray-800">
<nav class="lg:leading-6 relative">
<ul>
<li class="mt-12 lg:mt-8">
<h5 class="mb-8 lg:mb-3 font-semibold text-slate-900 dark:text-slate-200">Weeks</h5>
<ul class="space-y-6 lg:space-y-2 border-l border-gray-100 dark:border-gray-700">
<li>
<a href=https://fontysvenlo.github.io/prc2_web/docs/unit-testing-basics/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">
Unit Testing Basics
</a>
</li>
<li>
<a href=https://fontysvenlo.github.io/prc2_web/docs/parameterized-tests/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">
Parameterized tests
</a>
</li>
<li>
<a href=https://fontysvenlo.github.io/prc2_web/docs/design-for-testability/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">
Desgin for testability
</a>
</li>
</ul>
</li>
</ul>
</nav>
</aside><div class=lg:pl-[19.5rem]>
<div class="max-w-3xl mx-auto xl:max-w-none xl:ml-0 xl:mr-[15.5rem] xl:pr-16">
<article id=main-content class="prose prose-slate dark:prose-invert max-w-none dark:prose-a:text-fuchsia-400 prose-a:text-fuchsia-500">
<nav id=toc class=toc role=doc-toc><h2 id=toc-title>Table of Contents</h2><ol class="toc-list level-1"><li><a href=#_assertj_examples>AssertJ examples.</a><ol class="toc-list level-2"><li><a href=#_simple_tests>Simple Tests</a></li><li><a href=#_string_containment>String Containment</a></li><li><a href=#_collection_containment>Collection Containment</a></li><li><a href=#_assert_exceptions>Assert Exceptions</a></li></ol></li></ol></nav><section class="doc-section level-1"><h2 id=_assertj_examples>AssertJ examples.</h2><p>In our course we to stick to <a href=https://assertj.github.io/doc/>AssertJ</a> library where possible.</p>
<p>The rationale for that is:</p>
<div class=ulist><ul><li>The AssertJ assertion API is very powerful and can easily turn overly strict or brittle tests into more effective tests.<br>
You have come across tests in the mooc that insisted on specific formatting.
With AssertJ you can specify elements you want to see and do not want to see. See examples below.</li><li>AssertJ tests tend to be quite <strong>readable</strong>, once you get used to the fluent style. You will see long method names,
but they help understanding what is going on a no-brainer.</li><li>AssertJ can protect the test methods against unexpected exceptions, such as null pointers (NPE) before doing further tests.</li><li>With the exception of <em>testing exceptions</em>, the userinterface and api of AssertJ is quite consistent.<br>
You always start with <code>assertThat( objectOfInterest ).assertingMethod(…​)</code>.<br></li></ul></div>
<p>We try to use the latest stable version of AssertJ and Junit 5.</p>
<aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip: </span></h6><p>Either use sebipom version 3.0.0 and up or add assertj.core to your test dependencies.</p></aside>
<section class="doc-section level-2"><h3 id=_simple_tests>Simple Tests</h3><figure class=listing-block><figcaption>test boolean value.</figcaption>
<pre class=highlight><code class=language-java data-lang=java>  car.start();
  assertThat( car.motorIsOn() ) <b class=conum>1</b>
      .as(&#34;Motor should be on after start&#34;) <b class=conum>2</b>
      .isTrue(); <b class=conum>3</b></code></pre><ol class="callout-list arabic"><li>Object of interest, return value of method, which in the test fails if not true.</li><li>Optional description, use in particular when testing primitive values such as boolean.<br>
Use it to improved the information you get when the test fails.</li><li>The actual verification. Use <code>isTrue()</code> and <code>isFalse()</code> for <code>boolean</code>, <code>isEqualTo()</code> and <code>isEquals()</code> for other types.</li></ol></figure>
<figure class=listing-block><figcaption>Another SimpleTest</figcaption>
<pre class=highlight><code class=language-java data-lang=java>  assertThat(car.speedLimit())
      .as(&#34;Make it a legal car?&#34;)
      .isEqualTo(250);</code></pre></figure>
<figure class=listing-block><figcaption>Equals or same?</figcaption>
<pre class=highlight><code class=language-java data-lang=java>    assertThat( f1Champ ).isEqualTo( louis );
    assertThat( f1Champ ).isSameAs( louis );</code></pre></figure>
<p>Quiz: what is the difference between the two here: equals and same?</p>
<aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip: </span></h6><p>To follow along, tweak your IDE. Make sure you have the <a href=/2021/tips.html#_adding_your_own_code_templates_to_netbeans_ide>code template</a> to create a test method.
Note that the template adds a <strong>fail</strong> line, which should be disabled once the test and the business code agree.</p></aside></section>
<section class="doc-section level-2"><h3 id=_string_containment>String Containment</h3><figure class=listing-block><figcaption>test string containment</figcaption>
<pre class=highlight><code class=language-java data-lang=java>  Student student = ....

  assertThat( student.toString() )
      .isNotNull()                              <b class=conum>1</b>
      .doesNotContainIgnoringCase(&#34;student{&#34;)    <b class=conum>2</b>
      .contains( &#34;Harry&#34;, &#34;Potter&#34;, &#34;1980-07-31&#34;, &#34;12345&#34;); <b class=conum>3</b></code></pre><ol class="callout-list arabic"><li>Ensure that the next test can inspect a String without tripping over a NPE.</li><li><em>Auto generated is too simple.</em> Such autogenerated string typically starts with "Student{" for NetBeans IDE.</li><li>The test ensures that the birth date is contained, and 12345 is Harry’s student number.</li></ol></figure>
<p>How the string is formatted does not matter for this test to pass. It only requires the shown strings in any order.</p></section>
<section class="doc-section level-2"><h3 id=_collection_containment>Collection Containment</h3><p>For collections there are numerous tests. Collections in this context includes
everything <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html>Iterable</a>,
making it very powerful as can be seen in the Javadoc page of Iterable
by following the link in this sentence. Look at the sub-interfaces and the implementing classes.</p>
<figure class=listing-block><figcaption>simple containment.</figcaption>
<pre class=highlight><code class=language-java data-lang=java>    List&lt;Professor&gt; professors = List.of( SNAPE, DUMBLEDORE, MCGONAGALL ); <b class=conum>1</b>

    List&lt;Professor&gt; teachesTransfiguration = professors.stream()
            .filter( p -&gt; p.teaches( &#34;Transfigurations&#34; ) ).collect( toList() );

    assertThat( teachesTransfiguration )
            .isNotNull()                         <b class=conum>2</b>
            .hasSizeGreaterThanOrEqualTo( 2 )    <b class=conum>3</b>
            .contains( DUMBLEDORE, MCGONAGALL ); <b class=conum>4</b></code></pre><ol class="callout-list arabic"><li>Assume this to be in the business code or SUT.</li><li>Not really required by a good tip to make sure the test does not trip
over an NPE, which might be confusing.</li><li>The following contains test makes this actually redundant</li><li>because we want these two at least.</li></ol></figure>
<div class=listing-block><pre class=highlight><code class=language-java data-lang=java>//  List&lt;Student&gt; hogwartsStudents = ...; <b class=conum>1</b>
  List&lt;Student&gt; hogwartsStudents = List.of( HARRY, HERMIONE, RON ); <b class=conum>1</b>

  assertThat( hogwartsStudents )
          .isNotNull()                                <b class=conum>2</b>
          .hasSizeGreaterThanOrEqualTo( 3 )           <b class=conum>3</b>
          .extracting( s -&gt; s.getStudentNumber() )    <b class=conum>4</b>
          .containsExactlyInAnyOrder( 12346, 12345, 12347 ); <b class=conum>5</b></code></pre><ol class="callout-list arabic"><li>Assume that the business code produces such list.</li><li>Mostly self (test) protect.</li><li>Just to show that you can test for not empty, but also exact size, greater etc. This assertion is actually made redundant by the test in 5.</li><li>Extract a feature out of each student using a lambda. Its function should be obvious</li><li>Then test the list of extracted values for containment.</li></ol></div>
<aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip: </span></h6><p>Because adding a <strong>Non-Null</strong> test is easy and cheap in the fluent style of AssertJ,
it can be beneficial to always do that, so your test can show it as a failure instead of tripping over
an unexpected <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/NullPointerException.html>NPE</a>.
It more or less self-protects the test.</p></aside></section>
<section class="doc-section level-2"><h3 id=_assert_exceptions>Assert Exceptions</h3><p>In most business processes you want to avoid exceptions, but when they are expected,
they must be thrown by the code under test, so that too needs to be tested.</p>
<p>There are three cases:</p>
<div class="olist arabic"><ol class=arabic><li>You are not expecting an exception and do not (want to) care about it.<br>
Then let it simply occur and if it is a checked exception make your test method throw it.</li><li>You want specific code <strong class=red>not</strong> to throw an exception and your want to test for that.<br>
Wrap the suspect code in a lambda and invoke it using <code>assertThatCode( suspectCode )</code>.</li><li>You <strong class=green>want</strong> a specific exception to be thrown under specific a circumstance.<br>
Wrap the exception causing code in a lambda and catch and inspect the resulting exception using <code>assertThatThrownBy( causingCode )</code>.</li></ol></div>
<p>In AssertJ the exception testing helper have a format that deviates from the <code>assertThat().someCheck(…​)</code> style.
This inconsistency has to do with the way the exceptions causing code must be called, and cannot easily be avoided.
We propagate one form, declaring a lambda first and use that as the parameter to exception asserter.</p>
<section class="doc-section level-3"><h4 id=_ignore_or_pass_on>Ignore or pass on</h4><p>In case you are not interested in an exception in your test, but it is a checked exception, simply declare your test method to throw it.</p>
<figure class=listing-block><figcaption>Case 1: not interested in the (checked) exception, add a throws clause.</figcaption>
<pre class=highlight><code class=language-java data-lang=java>    @Test
    public void fileUsingMethod() throws IOException { <b class=conum>1</b>
        Files.lines(Path.of (&#34;puk.txt&#34;) );  <b class=conum>2</b>
    }</code></pre><ol class="callout-list arabic"><li>This code potentially throws an <code>IOException</code>, but you are not interested in testing the exception. If it occurs,
let the caller (Test Runner) deal with this unexpected situation. The IOException is an example.</li><li>This is the method that throws the checked exception. This is an example. Normally it should be a business method.</li></ol></figure>
</section>
<section class="doc-section level-3"><h4 id=_exception_not_wanted>Exception NOT wanted.</h4><p>If you want the check for an exception NOT to occur when invoking a code sequence, isolate the sequence
in a lambda expression of the form <code>ThrowingCallable code =() → { suspectCode(); }</code>.<br>
ThrowingCallable is a Functional interface and is part of AssertJ.</p>
<figure class=listing-block><figcaption>Case 2: the business code should explicitly NOT throw an exception.</figcaption>
<pre class=highlight><code class=language-java data-lang=java>    Student draco = new Student(&#34;Draco&#34;, &#34;Malfoy&#34;, LocalDate.of (1980,6,5));
    ThrowingCallable code = () -&gt; {
        hogwarts.addStudent( draco );  <b class=conum>1</b>
    };

    assertThatCode( code)
            .as( &#34;draco should be accepted to make the adventures possible&#34;)
            .doesNotThrowAnyException();</code></pre><ol class="callout-list arabic"><li>Is the only code that is checked for exceptions. This isolates the "suspect" code from
any other code that may cause issues.</li></ol></figure>
<aside class="admonition-block note" role=note><h6 class="block-title label-only"><span class=title-label>Note: </span></h6><p>Sometimes you may have the situation that exceptions appear to come out of the blue, as in you have
no idea what causes it and the stack trace is not very helpful either. In such cases, use this test method
to isolate the problematic code.</p></aside></section>
<section class="doc-section level-3"><h4 id=_exception_needs_to_occur>Exception needs to occur.</h4><p>When you want your business code to throw an exception, wrap that business code (the method invocations) in a lambda expression,
in the same way as in the previous paragraph, then pass that <code>code</code> to the exception assert method.</p>
<figure class=listing-block><figcaption>Catch a specific exception.</figcaption>
<pre class=highlight><code class=language-java data-lang=java>    @Test
    public void addIllegalProfessor() {
        var malfoy = new Professor( &#34;Lucius&#34;, &#34;Malfoy&#34;, LocalDate.of( 1953, 10, 9 ) ); <b class=conum>1</b>

        ThrowingCallable code = () -&gt; { <b class=conum>2</b>
            hogwarts.addProfessor( malfoy );
        };

        assertThatThrownBy( code )
                .isInstanceOf( Exception.class) <b class=conum>3</b>
                .isExactlyInstanceOf( IllegalArgumentException.class) <b class=conum>4</b>
                .hasMessageContainingAll( &#34;should&#34;,&#34;teach&#34;); <b class=conum>5</b>
        // fail( &#34;addIllegalProfessor completed succesfully; you know what to do&#34; );
    }</code></pre><ol class="callout-list arabic"><li>Someone that knows his classics understands that this crook can’t be professor at Hogwarts.</li><li>The lambda defines the throwing code. <code>org.assertj.core.api.ThrowableAssert.ThrowingCallable</code> is the functional interface for this purpose.</li><li>Sometimes it is good to be a bit relaxed on the exception type like in this line.</li><li>Or you need to be quite specific. You need only one, so choose either line 2 or 3. This is just an illustration.</li><li>You might want to inspect the message for keywords.</li></ol></figure>
<p>In this fluent style you can check many more things. See the <a href=https://assertj.github.io/doc/>AssertJ user guide</a>
and <a href=https://javadoc.io/doc/org.assertj/assertj-core/latest/index.html>API</a> for that.</p>
<aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip: </span></h6><p>The general advise is to have only one (1) assert per test method. This makes the test method very focused.
Stick to this rule and do not test unrelated features.
Also note that when a failure occurs (a test fails or an exception is thrown), the rest of the test is not executed anymore,
and this will therefor obscure further asserts in the same test method.</p></aside></section></section></section>
</article>
</div><footer class="text-sm leading-6 mt-12 mb-5">
Theme provided by <a class="text-pink-500 underline" href=https://github.com/FontysVenlo/sebi-theme target=_blank>SeBi Venlo</a>
</footer><div class="fixed z-20 top-[3.8125rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[19.5rem] py-10 px-8 overflow-y-auto hidden xl:block">
<h5 id=toc-header class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-200">On this page</h5>
<nav id=TableOfContents></nav>
</div></div>
<div class="hidden lg:hidden fixed inset-0 z-10 bg-gray-900/50 dark:bg-gray-900/60" id=menu-backdrop></div>
</div><script src=/prc2_web/js/main.min.dcd5fa5ed8a3225696c4340d000ecf01b9a284b1d0ce33f8f8c97c54ffd48f2f4cd6d62cb6b1e7f4d26d946f981620a342c939eae57bccd54a854264aa42f737.js integrity="sha512-3NX6XtijIlaWxDQNAA7PAbmihLHQzjP4+Ml8VP/Ujy9M1tYstrHn9NJtlG+YFiCjQsk56uV7zNVKhUJkqkL3Nw==" crossorigin=anonymous></script>
<script src=/prc2_web/js/highlight.min.4fdca95e2d3efe7ce1c14ca536fc0df95963ccad74d0bad12c90a493703df6fb4607d9a24ee5645fa5df22667b8f1dca010ce51922423191d22aad54e802ba99.js integrity="sha512-T9ypXi0+/nzhwUylNvwN+VljzK100LrRLJCkk3A99vtGB9miTuVkX6XfImZ7jx3KAQzlGSJCMZHSKq1U6AK6mQ==" crossorigin=anonymous defer></script>
<div id=copied-alert class="invisible opacity-0 transition-all ease-in-out duration-400 fixed bottom-3 right-10 z-50 flex p-4 mb-4 text-sm text-gray-800 bg-gray-200 rounded-lg dark:bg-gray-500 dark:text-gray-200" role=alert><svg class="inline flex-shrink-0 mr-3 w-5 h-5" viewBox="0 0 24 24" width="24" height="24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
<div>
<span class=font-medium>Code copied</span>
</div>
</div>
</body>
</html>