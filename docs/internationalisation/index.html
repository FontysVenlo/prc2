<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>PRC2 - 10 I18N, exceptions and logging</title><link rel=stylesheet href=https://fontysvenlo.github.io/prc2/css/main.min.ede7dd340f864d554aac0f24504a61b25b50412db081218b3e87e08a8cac3acafa99c7a4d57e04ecb58a9416c51585b4aa787393c1b3a5b1bf22efcb28c95a19.css integrity="sha512-7efdNA+GTVVKrA8kUEphsltQQS2wgSGLPofgioysOsr6mcek1X4E7LWKlBbFFYW0qnhzk8GzpbG/Iu/LKMlaGQ==" crossorigin=anonymous><link rel=stylesheet href=https://fontysvenlo.github.io/prc2/css/highlight.9e5322c61da2ab0997ce2db01648537ffacdb7b808fc24af4d99ff51257c59db9500031551feb8e62cafde7a246ae2c0015c2862637519a22eb0b49fa7b9d2f9.css integrity="sha512-nlMixh2iqwmXzi2wFkhTf/rNt7gI/CSvTZn/USV8WduVAAMVUf645iyv3nokauLAAVwoYmN1GaIusLSfp7nS+Q==" crossorigin=anonymous><link rel=stylesheet href=https://fontysvenlo.github.io/prc2/css/fontawesome.18a15c01c2df9b660114c44bfe1cd143dc48faeea9d5bc11a5b70509d8ec85ae65ac4c6dab72eb09a5c4770d45d6a2d802d28924e739d852a37c1b14f3a9cc61.css integrity="sha512-GKFcAcLfm2YBFMRL/hzRQ9xI+u6p1bwRpbcFCdjsha5lrExtq3LrCaXEdw1F1qLYAtKJJOc52FKjfBsU86nMYQ==" crossorigin=anonymous><script src=/prc2/js/init-darkmode.min.b7911813658cd032d0ed2d118da1fb57653d18386d8b1a26618f83f80019be21e977a1ddeeaeb51dcd1f7d21dfed542a8da077c29eb1ec03d84471bf90d3fabe.js integrity="sha512-t5EYE2WM0DLQ7S0RjaH7V2U9GDhtixomYY+D+AAZviHpd6Hd7q61Hc0ffSHf7VQqjaB3wp6x7APYRHG/kNP6vg==" crossorigin=anonymous></script>
<link rel=apple-touch-icon sizes=180x180 href=https://fontysvenlo.github.io/prc2/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://fontysvenlo.github.io/prc2/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://fontysvenlo.github.io/prc2/favicon-16x16.png></head><body class="antialiased text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800"><header class="sticky top-0 z-40 w-full flex-none lg:border-b lg:border-gray-900/10 dark:border-gray-50/[0.06] bg-white dark:bg-gray-800
border-b border-slate-900/10 lg:border-0 dark:border-slate-300/10"><div class="max-w-8xl mx-auto"><div class="py-4 lg:px-8 mx-4 lg:mx-0"><div class="relative flex items-center"><button id=menu-toggle type=button class="lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mr-3">
<span class=sr-only>Navigation</span><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
<a class="mr-3 flex-none overflow-hidden md:w-auto dark:hover:text-gray-200 hover:text-gray-900" href=https://fontysvenlo.github.io/prc2/>PRC2</a><div class="relative flex ml-auto"><nav class="hidden md:flex items-center text-sm leading-6 font-semibold text-gray-700 dark:text-gray-200"><ul class="flex space-x-8"><li><a href=https://fontysvenlo.github.io/prc2/pages/tips/ class="hover:text-sky-500 dark:hover:text-sky-400">Tips</a></li><li><a href=https://fontysvenlo.github.io/prc2/pages/setup/ class="hover:text-sky-500 dark:hover:text-sky-400">Setup</a></li></ul></nav><div class="flex items-center lg:border-l border-gray-200 ml-6 pl-6 dark:border-gray-700"><button type=button id=theme-toggle>
<span class="dark:hidden hover:text-sky-500"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span><span class="hidden dark:inline hover:text-sky-400"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span></button>
<a href=https://github.com/FontysVenlo/prc2 class="ml-6 block hover:text-sky-500 dark:hover:text-sky-400"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></div></div></div></div></header><div class="max-w-8xl mx-auto px-4 sm:px-6 md:px-8"><aside id=menu class="hidden lg:block fixed z-20 inset-0 top-[3.5rem] left-[max(0px,calc(50%-45rem))] right-auto w-[19.5rem] pb-10 px-8 overflow-y-auto bg-white dark:bg-gray-800"><nav class="lg:leading-6 relative"><ul class="block md:hidden"><li class="mt-12 lg:mt-8"><h5 class="mb-8 lg:mb-3 font-semibold text-slate-900 dark:text-slate-200">General</h5><ul class="space-y-2 border-l border-gray-100 dark:border-gray-700"><li><a href=https://fontysvenlo.github.io/prc2/pages/tips/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">Tips</a></li><li><a href=https://fontysvenlo.github.io/prc2/pages/setup/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">Setup</a></li></ul></li></ul><ul><li class="mt-12 lg:mt-8"><h5 class="mb-8 lg:mb-3 font-semibold text-slate-900 dark:text-slate-200">Weeks</h5><ul class="space-y-2 border-l border-gray-100 dark:border-gray-700"><li><a href=https://fontysvenlo.github.io/prc2/docs/unit-testing-basics/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">01 Unit Testing Basics</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/parameterized-tests/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">02 Parameterized tests</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/design-for-testability/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">03 Design for testability</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/generics/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">04 Generics</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/jpms-lambda-streams/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">05 JPMS, Lambda and Streams</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/database-access/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">06 Database Access JDBC</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/javafx/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">07 JavaFX</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/statemachine/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">08 The State of Things</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/reflection/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">09 Reflection</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/internationalisation/ class="block border-l pl-4 -ml-px
border-slate-500 dark:border-slate-400 text-black dark:text-slate-200">10 I18N, exceptions and logging</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/security/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">12 Security</a></li></ul></li></ul></nav></aside><div class=lg:pl-[19.5rem]><div class="max-w-3xl mx-auto xl:max-w-none xl:ml-0 xl:mr-[15.5rem] xl:pr-16"><article id=main-content class="prose prose-slate dark:prose-invert max-w-none dark:prose-a:text-fuchsia-400 prose-a:text-fuchsia-500"><nav id=toc class=toc role=doc-toc><h2 id=toc-title>Table of Contents</h2><ol class="toc-list level-1"><li><a href=#_internationalisation_i18n>Internationalisation (I18N)</a><ol class="toc-list level-2"><li><a href=#_the_date_and_time_api>The Date and Time API</a></li><li><a href=#_number_formats>Number Formats</a></li><li><a href=#_testing_localized_exceptions>Testing Localized Exceptions</a></li><li><a href=#_additional_pointers>Additional Pointers</a></li></ol></li><li><a href=#_exceptions_summary>Exceptions Summary</a><ol class="toc-list level-2"><li><a href=#_exception_handling>Exception-Handling</a></li><li><a href=#_exception_types>Exception types</a></li><li><a href=#_checked_exceptions_vs_unchecked_exceptions>Checked Exceptions vs. Unchecked Exceptions</a></li><li><a href=#_more_on_exception_handling_and_finally_clause>More on exception handling and <code>finally</code> clause</a></li><li><a href=#_custom_exception_classes>Custom <code>Exception</code> classes</a></li><li><a href=#_try_with_resources>Try with resources.</a></li><li><a href=#_choose_at_least_one_of_catch_or_finally_block>Choose: at least one of catch or finally block</a></li><li><a href=#_chaining_of_exceptions>Chaining of exceptions</a></li></ol></li><li><a href=#_logging>Logging</a><ol class="toc-list level-2"><li><a href=#_replace_soutv_by_using_a_log_macro>Replace soutv by using a log macro</a></li><li><a href=#_configure_logging>Configure logging</a></li></ol></li></ol></nav><section class="doc-section level-1"><h2 id=_internationalisation_i18n>Internationalisation (I18N)</h2><section class="doc-section level-2"><h3 id=_the_date_and_time_api>The Date and Time API</h3><p>In Java, an <code>Instant</code> represents a point on the time line. The origin (called epoch) is arbitrarily set at midnight
of the first of January 1970 Greenwich time (UTC). <code>Instant.now()</code> returns the current point on the time line,
being the number of seconds since the epoch (stored as <code>long</code>) and the number of nano seconds (stored as <code>int</code>). Each
day has 24x60x60 = 86400 seconds. A <code>Duration</code> is the amount of time between two instants. Both <code>Instant</code> and <code>Duration</code>
are immutable.</p><p>An <code>Instant</code> does not have a human readable format. The two kinds of human time in the java API are <em>local date/time</em> and
<em>zoned time</em>. Local date/time has a date and/or time of day, but no associated time zone. Examples:</p><p><img src=/prc2/images/calendar_example_LocalDate.png alt="calendar example LocalDate" width=25% title="Local Date example"> Local Date example.
<img src=/prc2/images/alarmclock_example_LocalTime.jpg alt="alarmclock example LocalTime" width=25% title="Local Time example"> Local Time Example.</p><p>Do not use zoned time, unless really necessary. Today’s date can be retrieved using <code>LocalDate.now()</code>, an arbitrary date
with <code>LocalDate.of(&lt;year>, &lt;month>, &lt;day>)</code> like <code>LocalDate.of(2021, 5, 1)</code> being first of May 2021. The amount of time
between dates is called a <code>Period</code>. Check the java API to read about convenient methods of <code>LocalDate</code> and <code>Period</code>. An
interesting one is the <code>datesUntil(…​)</code> method on <code>LocalDate</code>, which returns a <code>Stream&lt;LocalDate></code>.</p><p><code>LocalTime</code> objects can be created like LocalDates, e.g.: <code>LocalTime endOfLecture = LocalTime.now().plusHours(1);</code></p><p>Zoned times make use of time zomes. Java uses the IANA database: <a class=bare href=https://www.iana.org/time-zones>https://www.iana.org/time-zones</a>
To make a zoned time out of a <code>LocalDateTime</code> you can use the <code>ZonedDateTime.of()</code> method or do it like this:
<code>ZonedDateTime current = LocalDateTime.now().atZone(ZoneId.of("Europe/Amsterdam"));</code>. Now you get a specific <code>Instant</code> in time.
The other way around, you can can find the corresponding <code>ZonedDateTime</code> in another time zone using <code>instant.atZone(…​)</code>.</p><p>To represent dates and times in readable and customizable formats, use the <code>DateTimeFormatter</code> class. It can use predefined
standard formatters, <code>Locale</code> specific formatters and formatters with custom patterns.</p><p>This paragraph is based on Core Java Volume 2, 11th edition, chapter 6 by Cay Horstmann.</p></section><section class="doc-section level-2"><h3 id=_number_formats>Number Formats</h3><p>Some of you might have noticed that one of the teacher tests in the FXTriangulate exercise fails on your machine.</p><p>This is because on the machine we developed, the locale is set to en_US.
This causes the numbers to be formatted in the way that <code class=blue>Double.parseDouble(String input)</code> expects it.
If you run the same tests on a machine with say a German Locale, the test that reads the length back from the label,
use Double.parseDouble(), which is then surprised to find a comma instead of the decimal point, and fails with a format exception.</p><p>To solve that, modify the test in method <span class=blue>tLength</span> such that the line<br><code>double l = Double.parseDouble( ltext.split( ":" )[ 1 ] );</code> reads<br><code>double l = getDoubleConsideringLocale( ltext.split( ":" )[ 1 ] );</code>,
so that the whole test method reads</p><figure class=listing-block><figcaption>fxtriangulate.GUITest.tLength</figcaption><pre class=highlight><code class=language-java data-lang=java>@ParameterizedTest
@CsvSource( {
    &#34;a,greenCircle,blueCircle,500.0,400.0,100.0,100.0,500.0&#34;,
    &#34;b,redCircle,blueCircle,400.0,100.0,100.0,100.0,500.0&#34;,
    &#34;c,greenCircle,redCircle,300.0,100.0,100.0,400.0,100.0&#34;, } )
public void tLength( String line, String p1, String p2, double expected,
        double x1, double y1, double x2, double y2 ) throws ParseException {
    double xOrg = stage.getX();
    double yOrg = stage.getY();
    FxRobot rob = new FxRobot();
    rob.drag( &#39;#&#39; + p1 ).dropTo( xOrg + x1, yOrg + y1 );
    rob.drag( &#39;#&#39; + p2 ).dropTo( xOrg + x2, yOrg + y2 );
    String ltext = labelMap.get( line ).apply( triangulator ).getText();
    double l = getDoubleConsideringLocale( ltext.split( &#34;:&#34; )[ 1 ] ); <b class=conum>1</b>
    assertThat( l ).isCloseTo( expected, within( 0.1 ) );
//        fail( &#34;method tLength reached end. You know what to do.&#34; );
}</code></pre><ol class="callout-list arabic"><li>changed line.</li></ol></figure><figure class=listing-block><figcaption>Consider the local in which the number is written.</figcaption><pre class=highlight><code class=language-java data-lang=java>/**
    * Use the default locale to parse a double value from a string.
    * @param input string
    * @return the double
    * @throws ParseException if the string does not parse to double.
    */
static double getDoubleConsideringLocale( String input ) throws ParseException {
    return DecimalFormat.getNumberInstance().parse( input ).doubleValue(); <b class=conum>1</b>
}

/**
* Use the given locale to parse a double value from a string.
* @param locale to use.
* @param input string.
* @return the double.
* @throws ParseException if the string does not parse to double.
*/
static double getDoubleConsideringLocale( Locale locale, String input ) throws ParseException {
    return DecimalFormat.getNumberInstance(locale).parse( input ).doubleValue();
}</code></pre><ol class="callout-list arabic"><li>DecimalFormat.getNumberInstance gets a format that understands the default locale.</li></ol></figure><figure class=listing-block><figcaption>Set the locale for the execution. Useful for tests.</figcaption><pre class=highlight><code class=language-java data-lang=java>Locale.setDefault( Locale.GERMANY ); <b class=conum>1</b></code></pre><ol class="callout-list arabic"><li>Set the locale to GERMANY if it isn’t already. Similar for other languages.</li></ol></figure></section><section class="doc-section level-2"><h3 id=_testing_localized_exceptions>Testing Localized Exceptions</h3><p>The standard way of testing exceptions with assertj is explained in <a href=week01.html#_assert_exceptions>week01</a>.</p><p>To get to the localized message, which contains the message as translated by the locale framework is a bit more involved.</p><p>Luckily, AssertJ allows you to extract information from a Throwable, by using an extractor function. Now the Lambda bells should ring.</p><figure class=listing-block><figcaption>To make a long story very short: here is an example:</figcaption><pre class=highlight><code class=language-java data-lang=java>String[] keys = keyWords.split( &#34;\\|&#34;);
assertThatThrownBy( () -&gt; {
            MainSimulation.main( args );
} ).isExactlyInstanceOf( exceptionMap.get( expectionClassName ) )
        .extracting( e -&gt; e.getLocalizedMessage() ) <b class=conum>1</b>
        .asString()           <b class=conum>2</b>
        .contains( keys ); <b class=conum>3</b></code></pre><ol class="callout-list arabic"><li>extract using <code class=blue>Function&lt;? super Throwable,​T></code>, <code class=black>e → getLocalizedMessage()</code> in this case.</li><li>Get the assertion for in String. Do <strong class=red>not</strong> use <code>toString()</code>, because that produces a <em>String</em>, not an <strong class=blue>AbstractStringAssert</strong>.</li><li>And use the assert to check that the string contains the required key information.</li></ol></figure><section class=paragraph><h6 class=block-title>If you turn on type hints in NetBeans-IDE (or in intelij) you can see what the type is on which you call <code>contains(keys)</code></h6><p>image::assertjtypehints.png</p></section></section><section class="doc-section level-2"><h3 id=_additional_pointers>Additional Pointers</h3><div class=ulist><ul><li>If you haven’t read the Horstmann book but you need an introduction into Internationalization,
read this tutorial from DZONE <a href=https://dzone.com/articles/a-beginners-guide-to-java-internationalization>here</a>.
Make sure to read the bit about Resource Bundles, as you use them in the exercise for this week.</li><li>Jakob Jenkov also has a tutorial on <a href=http://tutorials.jenkov.com/java-internationalization/index.html target=_blank rel=noopener>Java Internationalization</a></li></ul></div></section></section><section class="doc-section level-1"><h2 id=_exceptions_summary>Exceptions Summary</h2><figure class=image-block><img src=/prc2/images/catch.gif alt=catch><figcaption>Figure 1. catching, the general idea.</figcaption></figure><section class="doc-section level-2"><h3 id=_exception_handling>Exception-Handling</h3><div class=ulist><ul><li>Throw statement (cfr. <code>throw new YourFavoriteException()</code>)</li><li><code>try</code> block: the code that is executed in normal circumstances, but might throw an exception.</li><li><code>catch</code> block: the code that is executed to handle an exception that was thrown in the try block. The so called <em>catch–block-parameter</em> specifies which exception type can be caught by the <code>catch</code> block.</li><li>Examples:</li></ul></div><figure class=listing-block id=Quotient-With-Exception><figcaption>Quotient with Exception</figcaption><pre class=highlight><code class=language-java data-lang=java>        // Prompt the user to enter two integers
        System.out.print( &#34;Enter two integers: &#34; );
        int number1 = input.nextInt();
        int number2 = input.nextInt();

        try {
            int result = quotient( number1, number2 );
            System.out.println( number1 + &#34; / &#34; + number2 + &#34; is &#34;
                    + result );
        } catch ( ArithmeticException ex ) {
            System.out.println( &#34;Exception: an integer &#34;
                    + &#34;cannot be divided by zero &#34; );
        }

        System.out.println( &#34;Execution continues ...&#34; );</code></pre></figure><figure class=listing-block id=Circle-With-Exception><figcaption>Circle with Exception</figcaption><pre class=highlight><code class=language-java data-lang=java>    /**
     * Set a new radius
     */
    public void setRadius( double newRadius )
            throws IllegalArgumentException {
        if ( newRadius &gt;= 0 ) {
            radius = newRadius;
        } else {
            throw new IllegalArgumentException(
                    &#34;Radius cannot be negative&#34; );
        }
    }</code></pre></figure></section><section class="doc-section level-2"><h3 id=_exception_types>Exception types</h3><figure class=image-block id=exhier><img src=/prc2/images/exceptionhierarchy.svg alt=exceptionhierarchy><figcaption>Figure 2. Exception hierarchy with Throwable at the top</figcaption></figure><div class=ulist><ul><li><em>System errors</em> are thrown by JVM and represented in the <code>Error</code> class. The <code>Error</code> class describes internal system errors.
Such errors rarely occur. If one does, there is little you can do beyond notifying the user and trying to terminate
the program gracefully. Errors are unchecked exceptions. However, often you are too late and the JVM will take over or might crash itself.</li><li><code>Exception</code> describes errors caused by your program and external circumstances. These errors can be caught and handled by your program.<ul><li><code>RuntimeException</code> is caused by programming errors, such as bad casting, accessing an out-of-bounds array, and numeric errors. Typically the
programmer (maybe you) is to blame.</li></ul></li></ul></div></section><section class="doc-section level-2"><h3 id=_checked_exceptions_vs_unchecked_exceptions>Checked Exceptions vs. Unchecked Exceptions</h3><div class=ulist><ul><li><code>RuntimeException</code>, <code>Error</code> and their subclasses are known as <em>unchecked exceptions</em>. All other exceptions are known as <em>checked exceptions</em>, meaning that the compiler forces the programmer to check and deal with the exceptions.</li><li>In most cases, unchecked exceptions reflect programming logic errors that are not recoverable. For example:<ul><li>A <code>NullPointerException</code> is thrown if you access an object through a reference variable before an object is assigned to it;</li><li>an <code>IndexOutOfBoundsException</code> is thrown if you access an element in an array outside the bounds of the array.</li></ul></li><li>Unchecked exceptions can occur anywhere in the program. To avoid cumbersome overuse of try-catch blocks, Java does not mandate you to write code to catch unchecked exceptions.</li><li>Often runtime exceptions point to a logic fault in the program, such as forgetting a nullity check before <em>dereferencing</em> a <strong>reference result</strong> from a method, or violating a precondition.<ul><li>Null values often indicate that an expected value could not be produced, such as in a search. If you are designing an API with such search, better return an empty collection (List, Set, Map) instead. Empty collections are <a href=https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html>predefined</a> and there for cheap to return. Also, since Java 8, the preferred return
type for some method that may of may not produce a result is <code>java.util.Optional&lt;T></code>. Usage explanation in <a href=https://www.baeldung.com/java-optional>Guide to Java 8 Optional on Baeldung</a>.</li></ul></li></ul></div></section><section class="doc-section level-2"><h3 id=_more_on_exception_handling_and_finally_clause>More on exception handling and <code>finally</code> clause</h3><figure class=image-block><img src=/prc2/images/throwandcatch.svg alt=throwandcatch><figcaption>Figure 3. Exception handling in Java consists of declaring exceptions, throwing exceptions, and catching and processing exceptions.</figcaption></figure><div class=ulist><ul><li>The code in the optional <code>finally</code> block is executed under all circumstances, regardless of whether an exception occurs in the try block or is caught. The code is called before the method is left.</li></ul></div></section><section class="doc-section level-2"><h3 id=_custom_exception_classes>Custom <code>Exception</code> classes</h3><p>You can roll your own exceptions, in case your "business" has requirements that demand this.</p><figure class=listing-block id=Circle-With-Radius-Exception><figcaption>Circle with Radius Exception</figcaption><pre class=highlight><code class=language-java data-lang=java>        try {
            setRadius(newRadius);
            numberOfObjects++;
        } catch (InvalidRadiusException ex) {
            ex.printStackTrace();
        }</code></pre></figure><figure class=listing-block id=Invalid-Radius-Exception><figcaption>Invalid Radius Exception</figcaption><pre class=highlight><code class=language-java data-lang=java>public class InvalidRadiusException extends Exception {

    private final double radius;

    /**
     * Construct an exception
     */
    public InvalidRadiusException(double radius) {
        super(&#34;Invalid radius &#34; + radius);
        this.radius = radius;
    }

    /**
     * Return the radius
     */
    public double getRadius() {
        return radius;
    }
}</code></pre></figure><figure class=listing-block id=Test-Circle-With-Radius-Exception><figcaption>Catch Circle with Radius Exception</figcaption><pre class=highlight><code class=language-java data-lang=java>        try {
            CircleWithRadiusException c1 = new CircleWithRadiusException(5);
            c1.setRadius(-5);
            CircleWithRadiusException c3 = new CircleWithRadiusException(0);
        } catch (InvalidRadiusException ex) {
            System.out.println(ex);
        }</code></pre></figure></section><section class="doc-section level-2"><h3 id=_try_with_resources>Try with resources.</h3><p><code>File</code> is one of the classes that has operations (methods) that throw
exceptions. <code>java.util.Scanner</code> implements <code>AutoCloseable</code> and as such has a <code>close()</code> method.
When constructed with file as argument, it will use said file as input and close the file, when the scanner is closed. It is good practice to close
a resource once it has been 'consumed', because this releases the resource. The purpose of such a close
operation is to signal that the resource should be brought to a state
that is safe and can be freed for other use.</p><p>Classes that have such properties are known by the generic name
<strong>resource</strong>, something that you need but is potentially scarce.<br>Since Java 7, we have a feature called <strong>try with resources</strong> . It adds a new construct to the try-catch block, namely
the resources that you are about to use. There can be more than one resource.</p><figure class=listing-block><figcaption>try with resources, using a scanner and a file.</figcaption><pre class=highlight><code class=language-java data-lang=java>        try (
          File f = new File( &#34;data.txt&#34; );
          Scanner scanner = new Scanner(f); <b class=conum>1</b>
        ) {
          String s1 = scanner.next();
        } catch ( FileNotFoundException fnfe ) {
            // deal with exceptions.
        } <b class=conum>2</b></code></pre><ol class="callout-list arabic"><li>Scanner is also autoclosable.</li><li>No other catch needed, that is only required if you want to deal with the exceptions that could
occur. No finally needed to close resources.</li></ol></figure><p>Once the try with resources is done with the resources, the resources
are automatically closed and freed. For this to work, the resource must implement the <code>java.lang.Autoclosable</code> interface.
You also save yourselves the tedious work of closing when an exception
occurred. That is also taken care of. So when your Java level is
greater or equal to Java 7, use <strong>try-with-resources</strong> whenever you can, because it will save you the work
of closing the resources in the finally block.</p><p>You declare the resources in the try-with-resources in the natural
order, the earlier resource being used by those further on.
They will be closed in the reverse order of declaration. In the above case that would mean:</p><div class="olist arabic"><ol class=arabic><li>Scanner scanner closed</li><li>InputStream in closed</li><li>File f closed</li></ol></div><p>which is the natural order of freeing or closing the resources.</p></section><section class="doc-section level-2"><h3 id=_choose_at_least_one_of_catch_or_finally_block>Choose: at least one of catch or finally block</h3><p>Note that the compiler insists on having at least one of</p><div class=ulist><ul><li>a catch block (multiple allowed) or</li><li>a finally block (at most one)</li></ul></div><p>So <code>try{…​}</code> is <strong>not</strong> allowed, but <code>try(AutoCloseable resource){…​}</code> <strong>is</strong>, because the compiler will construct an implicit finally block for you.
It is the same idea of having a default constructor, when you did not write any.<br>If you decide to not deal with any <strong>checked</strong> exception, your method can simply pass them on to the caller, and let the caller deal with the situation.</p></section><section class="doc-section level-2"><h3 id=_chaining_of_exceptions>Chaining of exceptions</h3><p>As can be seen from the class diagram in figure <a href=#exhier>Exception hierarchy with Throwable at the top</a>, all exceptions are descendants of <code>java.lang.Throwable</code>.</p><p>Exceptions can be <strong>chained</strong>, that is, one exception can hold a reference to another exception that is the actual cause of the exception being thrown. (Since Java 1.4 for all Throwables).</p><p>If you look at the API doc of <code>java.lang.Throwable</code>, you will see that it provides several constructors.<br>Three of them allow you to add as parameter of type Throwable, with the formal and aptly chosen name <strong>cause</strong>. The receiver of the Throwable (or should I say catcher) can inspect any descendant of Throwable about a deeper cause, using the method <code>Throwable.getCause()</code>. This can be seen as chain of Throwables, also called nested exceptions.</p><p>Although you cannot simply iterate through these exceptions, getting all in a loop is simple:</p><figure class=listing-block><figcaption>Reading all causes of an exception.</figcaption><pre class=highlight><code class=language-java data-lang=java>Throwable t = ex.getCause();
while ( t != null ) {
  // do something with t like print or getMessage;

  t= t.getCause();
}</code></pre></figure></section></section><section class="doc-section level-1"><h2 id=_logging>Logging</h2><p>Logging can be a very powerful instrument to squeeze very much or very precise information from a running application. It can be configured without modifying the source code. Use logging instead of system.out.print</p><figure class=listing-block><figcaption>Using a supplier suppresses the genartion of the log when the log level is not active.</figcaption><pre class=highlight><code class=language-java data-lang=java>public static void main( String[] args ) {
    Logger logger = Logger.getLogger( Main.class.getName() ); <b class=conum>1</b>
    logger.log( Level.FINE, <b class=conum>2</b>
       ()-&gt; String.format(&#34;Hello %1$s args length= %2$d &#34;, &#34;world&#34;,args.length) <b class=conum>3</b>
    );
}</code></pre><ol class="callout-list arabic"><li>Create a specific logger for this class.</li><li>This log statement only does 'work' when the log level is set to FINE or higher (FINER, FINEST)</li><li>This lambda has the shape of a supplier and is only evaluated or computed when the logging level is active.</li></ol></figure><section class="doc-section level-2"><h3 id=_replace_soutv_by_using_a_log_macro>Replace soutv by using a log macro</h3><p>When you use a supplier to supply the message that is logged, when logging is active, logging can become cheap.
To make this work, you might want to teach your IDE to help a bit here, by adding a keyboard macro that adds
logging instead of simple System.out.println(…​).</p><figure class=listing-block><figcaption><code>logv</code> definition for NetBeans IDE</figcaption><pre class=highlight><code class=language-java data-lang=java>logger.fine( ()-&gt;&#34;${EXP instanceof=&#34;&lt;any&gt;&#34; default=&#34;exp&#34;} = &#34; + ${EXP});</code></pre></figure><p>Now logging becomes simpler than ever.</p><div class="olist arabic"><ol class=arabic><li>First create a logger with the already define macro <code class=black>logr</code> [tab] and then</li><li>inside the methods use <code class=black>logv</code> [tab] instead of [black] <code>soutv</code> wherever you would like to output stuff for debugging.</li></ol></div><p>In your logging.properties file add the proper level for your class or as global and you can turn the logging on or off whenever you need to.</p></section><section class="doc-section level-2"><h3 id=_configure_logging>Configure logging</h3><p>When you copy the file logging.properties from its default location <code class=green>$JAVA_HOME/conf/logging.properties</code> to your projects
directory, preferably under a <code>conf</code> directory, you can modify and adapt that file to make logging effective in a very precise way,
by specifying what level you want for what class.</p><figure class=listing-block><figcaption>conf/logging.properties file excerpt. Set logging to fine for one program.</figcaption><pre class=highlight><code class=language-properties data-lang=properties>#.properties
handlers= java.util.logging.ConsoleHandler
.level=FINE <b class=conum>1</b>
java.util.logging.ConsoleHandler.level=FINE
logdem.LogDem.level=FINE <b class=conum>2</b></code></pre><ol class="callout-list arabic"><li>specify global level</li><li>specify for one class
Then in the java startup (for instance in a run script or in one of the IDE settings), make sure this java property specifies the file.</li></ol></figure><p>For NetBeans add <code class=blue>-Djava.util.logging.config.file=conf/logging.properties</code> to the java run actions.</p><p>Say the class that needs debugging is called <code>logging.Main</code>. Then in the logging properties file (see above) add
<code>logging.Main.level = FINE</code>, and make sure that you start the JVM with the proper login properties file.</p><aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip:</span></h6><p>You can also set the parameter in the 'run-configuration' of your project.
Add the appropriate option there, e.g. -Djava.util.logging.config.file=conf/logging.properties</p><figure class=image-block><img src=/prc2/images/run-logging.png alt="run logging"><figcaption>Figure 4. point to project specific log file.</figcaption></figure></aside><p>Read a bit more about logging in the book and get some additional information using <a class=bare href=https://sematext.com/blog/java-logging/>https://sematext.com/blog/java-logging/</a>.</p></section></section></article></div><footer class="text-sm leading-6 mt-12 mb-5">Theme provided by <a class="text-pink-500 underline" href=https://github.com/FontysVenlo/sebi-theme target=_blank>SeBi Venlo</a></footer><div class="fixed z-20 top-[3.8125rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[19.5rem] py-10 px-8 overflow-y-auto hidden xl:block"><h5 id=toc-header class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-200">On this page</h5></div></div><div class="hidden lg:hidden fixed inset-0 z-10 bg-gray-900/50 dark:bg-gray-900/60" id=menu-backdrop></div></div><script src=/prc2/js/main.min.956966b3103878d329f9460daf829f6ad1d50fc9e24d20ff0c5d93a4006065df877564edc24b6a2a5182bf4387d13d9f960a1df6fc9d259d38cfb8e83509c999.js integrity="sha512-lWlmsxA4eNMp+UYNr4KfatHVD8niTSD/DF2TpABgZd+HdWTtwktqKlGCv0OH0T2flgod9vydJZ04z7joNQnJmQ==" crossorigin=anonymous></script>
<script src=/prc2/js/highlight.min.cd8091de05577194483fff730f723dc2379226a640ef117b33ad133cc3da2f690d95af8fc32186b11dc10628e66e325b33bee2bf443c98315905e50f22aecc50.js integrity="sha512-zYCR3gVXcZRIP/9zD3I9wjeSJqZA7xF7M60TPMPaL2kNla+PwyGGsR3BBijmbjJbM77iv0Q8mDFZBeUPIq7MUA==" crossorigin=anonymous defer></script><div id=copied-alert class="invisible opacity-0 transition-all ease-in-out duration-400 fixed bottom-3 right-10 z-50 flex p-4 mb-4 text-sm text-gray-800 bg-gray-200 rounded-lg dark:bg-gray-500 dark:text-gray-200" role=alert><svg class="inline flex-shrink-0 mr-3 w-5 h-5" viewBox="0 0 24 24" width="24" height="24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg><div><span class=font-medium>Code copied</span></div></div></body></html>