<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>PRC2 - 07 The State of Things</title><link rel=stylesheet href=https://fontysvenlo.github.io/prc2/css/main.min.ede7dd340f864d554aac0f24504a61b25b50412db081218b3e87e08a8cac3acafa99c7a4d57e04ecb58a9416c51585b4aa787393c1b3a5b1bf22efcb28c95a19.css integrity="sha512-7efdNA+GTVVKrA8kUEphsltQQS2wgSGLPofgioysOsr6mcek1X4E7LWKlBbFFYW0qnhzk8GzpbG/Iu/LKMlaGQ==" crossorigin=anonymous><link rel=stylesheet href=https://fontysvenlo.github.io/prc2/css/highlight.9e5322c61da2ab0997ce2db01648537ffacdb7b808fc24af4d99ff51257c59db9500031551feb8e62cafde7a246ae2c0015c2862637519a22eb0b49fa7b9d2f9.css integrity="sha512-nlMixh2iqwmXzi2wFkhTf/rNt7gI/CSvTZn/USV8WduVAAMVUf645iyv3nokauLAAVwoYmN1GaIusLSfp7nS+Q==" crossorigin=anonymous><link rel=stylesheet href=https://fontysvenlo.github.io/prc2/css/fontawesome.18a15c01c2df9b660114c44bfe1cd143dc48faeea9d5bc11a5b70509d8ec85ae65ac4c6dab72eb09a5c4770d45d6a2d802d28924e739d852a37c1b14f3a9cc61.css integrity="sha512-GKFcAcLfm2YBFMRL/hzRQ9xI+u6p1bwRpbcFCdjsha5lrExtq3LrCaXEdw1F1qLYAtKJJOc52FKjfBsU86nMYQ==" crossorigin=anonymous><script src=/prc2/js/init-darkmode.min.b7911813658cd032d0ed2d118da1fb57653d18386d8b1a26618f83f80019be21e977a1ddeeaeb51dcd1f7d21dfed542a8da077c29eb1ec03d84471bf90d3fabe.js integrity="sha512-t5EYE2WM0DLQ7S0RjaH7V2U9GDhtixomYY+D+AAZviHpd6Hd7q61Hc0ffSHf7VQqjaB3wp6x7APYRHG/kNP6vg==" crossorigin=anonymous></script>
<link rel=apple-touch-icon sizes=180x180 href=https://fontysvenlo.github.io/prc2/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://fontysvenlo.github.io/prc2/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://fontysvenlo.github.io/prc2/favicon-16x16.png></head><body class="antialiased text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800"><header class="sticky top-0 z-40 w-full flex-none lg:border-b lg:border-gray-900/10 dark:border-gray-50/[0.06] bg-white dark:bg-gray-800
border-b border-slate-900/10 lg:border-0 dark:border-slate-300/10"><div class="max-w-8xl mx-auto"><div class="py-4 lg:px-8 mx-4 lg:mx-0"><div class="relative flex items-center"><button id=menu-toggle type=button class="lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mr-3">
<span class=sr-only>Navigation</span><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
<a class="mr-3 flex-none overflow-hidden md:w-auto dark:hover:text-gray-200 hover:text-gray-900" href=https://fontysvenlo.github.io/prc2/>PRC2</a><div class="relative flex ml-auto"><nav class="hidden md:flex items-center text-sm leading-6 font-semibold text-gray-700 dark:text-gray-200"><ul class="flex space-x-8"><li><a href=https://fontysvenlo.github.io/prc2/pages/tips/ class="hover:text-sky-500 dark:hover:text-sky-400">Tips</a></li><li><a href=https://fontysvenlo.github.io/prc2/pages/setup/ class="hover:text-sky-500 dark:hover:text-sky-400">Setup</a></li></ul></nav><div class="flex items-center lg:border-l border-gray-200 ml-6 pl-6 dark:border-gray-700"><button type=button id=theme-toggle>
<span class="dark:hidden hover:text-sky-500"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span><span class="hidden dark:inline hover:text-sky-400"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span></button>
<a href=https://github.com/FontysVenlo/prc2 class="ml-6 block hover:text-sky-500 dark:hover:text-sky-400"><svg viewBox="0 0 24 24" width="24" height="24" class="w-5 h-5" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></div></div></div></div></header><div class="max-w-8xl mx-auto px-4 sm:px-6 md:px-8"><aside id=menu class="hidden lg:block fixed z-20 inset-0 top-[3.5rem] left-[max(0px,calc(50%-45rem))] right-auto w-[19.5rem] pb-10 px-8 overflow-y-auto bg-white dark:bg-gray-800"><nav class="lg:leading-6 relative"><ul class="block md:hidden"><li class="mt-12 lg:mt-8"><h5 class="mb-8 lg:mb-3 font-semibold text-slate-900 dark:text-slate-200">General</h5><ul class="space-y-2 border-l border-gray-100 dark:border-gray-700"><li><a href=https://fontysvenlo.github.io/prc2/pages/tips/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">Tips</a></li><li><a href=https://fontysvenlo.github.io/prc2/pages/setup/ class="block border-l pl-4 -ml-px border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300">Setup</a></li></ul></li></ul><ul><li class="mt-12 lg:mt-8"><h5 class="mb-8 lg:mb-3 font-semibold text-slate-900 dark:text-slate-200">Weeks</h5><ul class="space-y-2 border-l border-gray-100 dark:border-gray-700"><li><a href=https://fontysvenlo.github.io/prc2/docs/unit-testing-basics/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">01 Unit Testing Basics</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/rest/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">02 REST API</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/testability-and-mocking/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">03 Testability and mocking</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/database-access/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">04 Database Access JDBC</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/jpms-lambda-streams/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">05 JPMS, Lambda and Streams</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/generics/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">06 Generics</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/statemachine/ class="block border-l pl-4 -ml-px
border-slate-500 dark:border-slate-400 text-black dark:text-slate-200">07 The State of Things</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/internationalisation/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">10 I18N, exceptions and logging</a></li><li><a href=https://fontysvenlo.github.io/prc2/docs/security/ class="block border-l pl-4 -ml-px
border-transparent hover:border-slate-400 dark:hover:border-slate-400 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200">12 Security</a></li></ul></li></ul></nav></aside><div class=lg:pl-[19.5rem]><div class="max-w-3xl mx-auto xl:max-w-none xl:ml-0 xl:mr-[15.5rem] xl:pr-16"><article id=main-content class="prose prose-slate dark:prose-invert max-w-none dark:prose-a:text-fuchsia-400 prose-a:text-fuchsia-500"><nav id=toc class=toc role=doc-toc><h2 id=toc-title>Table of Contents</h2><ol class="toc-list level-1"><li><a href=#_the_state_of_things>The state of things</a></li><li><a href=#_implementing_behavior_using_state_machines>Implementing behavior using state machines.</a></li><li><a href=#_state_machines_and_regular_expressions>State machines and regular expressions</a></li><li><a href=#_regular_expressions>Regular expressions</a><ol class="toc-list level-2"><li><a href=#_basic_regex_syntax_and_rules>Basic regex syntax and rules</a></li><li><a href=#_grouping>Grouping</a></li></ol></li><li><a href=#_matches_matchers_match_groups_and_group_names>Matches, Matchers, match Groups, and group names.</a><ol class="toc-list level-2"><li><a href=#_named_groups_and_comments_to_the_regex>Named groups and comments to the regex</a></li><li><a href=#_useful_web_sites>Useful web sites</a></li></ol></li></ol></nav><section class="doc-section level-1"><h2 id=_the_state_of_things>The state of things</h2></section><section class="doc-section level-1"><h2 id=_implementing_behavior_using_state_machines>Implementing behavior using state machines.</h2><p>Systems sometimes have to exhibit some kind of behavior that is different observable
output over time. This is different from a pure function, which will always produce the
same output for the same input. The behavior differs depending on the 'history'
the system experienced, typically in the form of 'events' or method calls that happened over time.
Such method calls change the state the system is in. We call such behavior state-full
and this way of operating is often implemented using a 'state machine'.
In this week and in the AADE course we will be using two concepts:</p><div class="olist arabic"><ol class=arabic><li>The state (machine) diagram</li><li>The State pattern</li></ol></div><hr><p><img src=/prc2/images/lamp-battery-switch.gif alt="lamp battery switch" title="simple switch circuit, from 'https://electronics.stackexchange.com/'" class="thumb left"> A state machine
is a software concept used to implement the behavior of something whose 'reaction'
or outcome depends on the events that happened over time. A very simple example is a lamp and a switch.
When properly connected and none of the parts is defect, the bulb will light up when the switch is in the on state.
As state machine: the switch passes current when it has been turned on, which can be expressed as a turn-on event, making the bulb light up.
From the diagram it should be obvious that a current can only flow if the switch is in the on (or closed) state.</p><p>In software we model this as the <em>path</em> the code takes, which then depends on some condition or value.</p><p><img src=/prc2/images/switch.svg alt=switch title="state diagram model of simple switch">
The state diagram is a way to express the behavior in a graphical manner. Each state of the system is drawn as a box with rounded corners, like in the diagram above.
In the <a href=https://en.wikipedia.org/wiki/State_pattern target=_blank rel=noopener>GoF State</a> pattern, which is an object oriented way of modeling state behavior, one uses different
objects to realize the effect of changing the software path. The objects all implement the same interface, but have a different implementation.
Then, whenever a state switching event occurs, the current state object is replaced by the state object for the new state.</p><p><img src=/prc2/images/railway-switch.gif alt="railway switch" title="railway switch from 'https://en.wikipedia.org/wiki/Railroad_switch'" class="thumb left"> As another analogy, you can think of a railway switch.
The active state object will always have the same behavior. One makes the train go <em>straight</em>, the other makes it go <em>right</em>.
Each state on itself always does the same, like a pure function, so with the same input (train) the same output is produced.
The switching between states makes it possible to control the direction of the train traffic.</p><p>State machines or state charts can be implemented in several ways. In this week we will apply an OO approach using the well known
<a href=https://en.wikipedia.org/wiki/State_pattern target=_blank rel=noopener>State Pattern </a>, combined with <code class=blue>enums</code> and some Java 8 features, in particular <code class=blue>default</code> methods.</p><p>The <strong>State</strong> Pattern has the following UML class diagram:</p><figure class=image-block><img src=/prc2/images/StatePattern.svg alt=StatePattern><figcaption>Figure 1. State Pattern</figcaption></figure><p>We deal with a context, an <em>abstract</em> state and multiple concrete state implementations that do the work
and represent the state elements in the diagram. In the diagram above there
would be a state instance for both <strong>ConcreteStateA</strong> and <strong>ConcreteStateB</strong>.
In the implementation of the exercise of this week we will be using <code class=blue>enum</code> as the basic construct for our work.</p><p>Using a functional state approach by using <code>enum</code> has the following advantages:</p><div class=ulist><ul><li>There is no chance of creating new states. Enum ensures that the only
instances there ever will be are created at class loading time. You always know all states there ever will be.</li><li>A state can be implemented as a pure function, making the number of tests needed minimal. The inputs to the state are
the state of the context (or technically, the state stored in the context), the inputs, and the event or method call.</li><li>Such functions and thereby state instances can be shared between contexts, because functional states do not have any
state themselves. The actual state is saved in the context. This is not because <span class=blue>enum</span>s
cannot have state, they can, but because a functional state in a state-machine shouldn’t.
It <span class=big>IS</span> the state and should <span class=big>not have</span> any. It should always do the same. More importantly, they are immutable,
meaning no one can break them by setting some wrong value.</li><li>A functional state is easily tested without a need for a complex context.
The context can easily be <em>mocked</em> as can be seen in this week’s olifantysballs exercise.</li></ul></div><p>The disadvantage of using functional states in this way is that they cannot keep information themselves, such as counting something.
But quite often the counting involves only a few possible values, which can be states themselves, or can be realized in the context.
As an example for few counting states you might consider a traffic light which counts green, yellow, red.</p><section class="admonition-block warning red" role=doc-notice><h6 class="block-title label-only"><span class=title-label>Warning:</span></h6><p>A common error made by novice programmers is to call a method inside a constructor that takes the constructor’s type as a parameter.</p><figure class=listing-block><figcaption>Do <strong class="big red">not</strong> do this inside the constructor</figcaption><pre class=highlight><code class=language-java data-lang=java>    StateMachine(){
      this.initialState = State.IDLE;
      this.initialState.enter( this ); <b class=conum>1</b>

    }</code></pre><ol class="callout-list arabic"><li>Problematic call of someField.enter(this) inside constructor. Something to avoid.</li></ol></figure></section><p>The problem is that the constructor may not yet be complete, in particular when fields are defined and
initialized later in the constructor or even after the constructor definition.</p><p>To avoid this problem, you typically have some init() method that should be called after construction or use a factory method that does something similar.
In the gumball machine we chose the later. You can find the details in the javadoc documentation of the exercise.</p><figure class=listing-block><figcaption>Use init method.</figcaption><pre class=highlight><code class=language-java data-lang=java>StateMachine(){
  this.initialState = State.IDLE;

}

StateMachine init(){
  this.initialState.enter( this ); <b class=conum>1</b>
  return this;
}</code></pre></figure><figure class=listing-block><figcaption>Caller has not much extra work.</figcaption><pre class=highlight><code class=language-java data-lang=java>    StateMachine sm = new StateMachine().init();</code></pre></figure><aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip:</span></h6><p>Do not always use all tricks you’ve learned so far. They are not always needed.
In particular, states do not have to be generic, and with
enums that would even be impossible, because an enum value is a leaf class all by it self,
so making it generic for later specialisation like in the <a href=../generics/#_self_use_in_generic_definitions>Zoo example in part 4</a> is futile.
If you appear to run into this situation, because your <strong class=green>context</strong> is generic, do not simply use raw objects but see if you can refactor out an interface that is NOT generic,
to be implemented by the context that wants to be generic. You will see that in the JsonMarshaller, the state machine part.</p></aside></section><section class="doc-section level-1"><h2 id=_state_machines_and_regular_expressions>State machines and regular expressions</h2><p>You can find a lot on the relation between state machines and regular expressions.
In most cases, including in Java, the regex is translated or compiled into a statemachine (just) before matches are attempted.</p><p>A nice illustration is given by the
<a href=https://regexper.com/>REGEXPER</a> website, that turns a regex into a railroad diagram. This make the understanding of a regular expression way easier.</p><p>A simple regex : Dutch postal code: <code>"\d{4}\s[A-Z]{2}"</code></p><p><a href=https://github.com/janissl/simple-java-regex-tester>GitHub for simple regex tester</a></p><figure class=image-block><img src=/prc2/images/postcode-regex.svg alt="postcode regex"><figcaption>Figure 2. with diagram</figcaption></figure><p>The postcode railroad diagram reads as a digit followed by 3 more digits, a space, a letter and one more letter.</p><figure class=listing-block><figcaption>More complex example:</figcaption><pre class=highlight><code class=language-java data-lang=java>// note that you can break off the regex in java and intersperse it with comments.
String emailRegex=
      // quite some rubbish before the at sign
     &#34;^[a-zA-Z0-9.!#$%&amp;&#39;&#39;*+/=?^_`{|}~-]+&#34;+
     &#34;@&#34;+ // the at sign followed by a more restricted set of chars,
          //  with some lengths restrictions
     &#34;[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?&#34;+ // optional non capt grp
     // any number of letter-number combos
     &#34;(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$&#34;;</code></pre></figure><figure class=image-block><img src=/prc2/images/email-regex.svg alt="email regex"><figcaption>Figure 3. Produces this 'railroad' diagram. which is equivalent to a state machine diagram.</figcaption></figure><p>Note that there is not one TRUE regex for email addresses. If you want to know the nitty-gritty details
of valid email addresses look at RFC 8398 or RFC 5322, or ask in CAN class.</p><section class="admonition-block warning" role=doc-notice><h6 class="block-title label-only"><span class=title-label>Warning:</span></h6><p>Once you understand that regexes are state machine specifications, and that it is easy to create state machines
that never 'terminate', you understand that regular expressions can also be dangerous.</p><p>Accepting a regular expression
from any source may cause a denial of service attack, because such expression may put your server into an endless loop.</p><p>Advice: only accept a restricted set of regexes, maybe parse them before use. In particular avoid back tracking constructs.</p><p><a href=https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS>Regular expression Denial of Service - ReDoS</a></p><p><strong class="big black">So beware</strong>.</p></section></section><section class="doc-section level-1"><h2 id=_regular_expressions>Regular expressions</h2><p>An often heard saying is: <em>When you have a problem that can be solved with a regular
expression, you actually have two problems, the problem and how to write the expression.</em></p><p>There is indeed some truth in the saying: Regular expressions can be hard to read (and hence maintain), and sometimes hard to write as well.</p><p>The problem lies in the fact that the format of the most popular form, the Perl dialect, is quite terse.
However you can do quite a few things to improve at least their readability.</p><div class=video-block><iframe src="//www.youtube.com/embed/EkluES9Rvak?rel=0" frameborder=0 allowfullscreen></iframe></div><section class="doc-section level-2"><h3 id=_basic_regex_syntax_and_rules>Basic regex syntax and rules</h3><p>A simple string is also a regular expression. As far as there are no meta characters involved,
a string simply matches itself.</p><div class=ulist><ul><li>The first meta character you need to know is the dot <code class=blue>'.'</code>, which matches any character. So a line
with a dot will match any line that is the same as the line with any substitution for the dot character (including itself).</li><li>The second meta character is the backslash <code class=blue>'\'</code>. It takes the special meaning (as in meta) of the following character away.
Back to our matching line: if you want exactly a dot at the place of the dot, prefix it with a backslash, so it will be understood as a dot. Like this: [red]"\.".
But since we using Java, and the backslash already has a special role in strings, you must double the backslash in most cases, thus: <code class=blue>"\\."</code>.</li><li>The next are the quantifier: how many of something do you want.<ul><li>? 0 or one, aka at most. So "a?" means at most one a.</li><li>+ at least one.</li><li>* any number of times, including zero.</li><li>numeric quantifier, using braces ('{' and '}''). For instance "a{1,4}" means a between 1 and 4 times, inclusive.
You can also write "a{3}" meaning exactly 3 as. Or a lower (a{2,} for at least 2 a) or upper boundary (a{,12}) at most 12.</li></ul></li><li>character classes<ul><li>user specified: [aeiou] matches the English vowels, [a-p] the first 16 characters of the alphabet, [a-pA-P] the same, but ignoring case.</li></ul></li><li>predefined :<ul><li>\w = word, which is the set of characters in [a-zA-Z_0-9], so a through z in both upper and lower case, the underscore and the digits 0-9.</li><li>\W negates the class, in this case it matches the non-word characters</li><li>\d the decimal digits</li><li>\D not a digit.
etc.</li></ul></li></ul></div><div class=table-block><table class="frame-all grid-all stretch"><col style=width:50%><col style=width:50%><thead><tr><th class="halign-left valign-top">char</th><th class="halign-left valign-top">Meaning</th></tr></thead><tbody><tr><td class="halign-left valign-top">.</td><td class="halign-left valign-top">match all</td></tr><tr><td class="halign-left valign-top">+</td><td class="halign-left valign-top">at least one quantifier</td></tr><tr><td class="halign-left valign-top">?</td><td class="halign-left valign-top">ate most one</td></tr><tr><td class="halign-left valign-top">{</td><td class="halign-left valign-top">start of quantifier spec</td></tr><tr><td class="halign-left valign-top">}</td><td class="halign-left valign-top">end of quantifier spec</td></tr><tr><td class="halign-left valign-top">[</td><td class="halign-left valign-top">start character class</td></tr><tr><td class="halign-left valign-top">]</td><td class="halign-left valign-top">end character class</td></tr></tbody></table></div><p>The definition as far as java is concerned is given in the <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Pattern.html>java.util.Pattern</a> class.
You do not have to know all details, the summary above suffices for the most cases. The java doc of pattern gives a complete overview.</p></section><section class="doc-section level-2"><h3 id=_grouping>Grouping</h3><p>Sometimes you are not just interested in a match or not, but want to capture parts of the input for further processing.
For that you use the parenthesis '(' and ')'. A group, when found, will get a number (or even a name, but that is not in this lesson).
Group 0 is typically the whole expression, and number one the first group identified with the parenthesis.</p><p>So if you have a regular expression string line "a(e|i|o|u)", group number one will be the group containing the vowel following a, if any.</p><p>To get acquainted with regular expressions, it is very helpful to write some tests, to verify your pattern or assumptions on the pattern.</p></section></section><section class="doc-section level-1"><h2 id=_matches_matchers_match_groups_and_group_names>Matches, Matchers, match Groups, and group names.</h2><p>The java.util.regex package contains the classes to work with regular expressions. The most important are the <strong>Pattern</strong> and <strong>Matcher</strong> classes.</p><p>A Pattern is a compiled representation of a regular expression. It is used to create a Matcher object that will match the regular expression against an input string.</p><p>In a pattern you can define groups of interest, for instance values that you want to extract from the input string. The Matcher object will then contain the groups that were found in the input string. You create a group by surrounding the part of the pattern with parenthesis.</p><div class=listing-block><pre class=highlight><code class=language-java data-lang=java>import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Main {
    public static void main(String[] args) {
        String input = &#34;The quick brown fox jumps over the lazy dog&#34;;
        String pattern = &#34;The (\\w+) brown (\\w+) jumps over the (\\w+) dog&#34;; <b class=conum>1</b>
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(input);
        if (m.find()) { <b class=conum>2</b>
            System.out.println(&#34;Found a match&#34;);
            System.out.println(&#34;Group 0: &#34; + m.group(0)); <b class=conum>3</b>
            System.out.println(&#34;Group 1: &#34; + m.group(1));
            System.out.println(&#34;Group 2: &#34; + m.group(2));
            System.out.println(&#34;Group 3: &#34; + m.group(3));
        } else {
            System.out.println(&#34;No match found&#34;);
        }
    }
}</code></pre><ol class="callout-list arabic"><li>There are three groups in the pattern. The first group matches the word after "The", the second group matches the word after "brown", and the third group matches the word after second "the".</li><li>There are <em>several</em> methods to match a pattern against an input string. The <code>find</code> method is the most common one. It returns <code>true</code> if the pattern is found in the input string, and <code>false</code> otherwise. There is also a <code>matches()</code> method, which returns <code>true</code> if the pattern matches the whole input string, and <code>false</code> otherwise.
The third method is <code>lookingAt()</code>, which returns <code>true</code> if the pattern matches the beginning of the input string, and <code>false</code> otherwise.</li><li>Group 0 is the whole match. The other groups are the parts of the input string that match the groups in the pattern.</li></ol></div><section class="doc-section level-2"><h3 id=_named_groups_and_comments_to_the_regex>Named groups and comments to the regex</h3><p>You can give the groups names, so the code becomes less brittle when the pattern changes. This is done by using the syntax <code>(?&lt;name>pattern)</code>.</p><div class=listing-block><pre class=highlight><code class=language-java data-lang=java>import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Main {
    public static void main(String[] args) {
        String input = &#34;The quick brown fox jumps over the lazy dog&#34;;
        String pattern =
                      &#34;The (?&lt;first&gt;\\w+)&#34; // comment 1
                      +&#34; brown (?&lt;second&gt;\\w+)&#34; // comment 2
                      +&#34; jumps over the (?&lt;third&gt;\\w+) dog&#34;; // comment 3
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(input);
        if (m.find()) {
            System.out.println(&#34;Found a match&#34;);
            System.out.println(&#34;Group 0: &#34; + m.group(0));
            System.out.println(&#34;Group first: &#34; + m.group(&#34;first&#34;));
            System.out.println(&#34;Group second: &#34; + m.group(&#34;second&#34;));
            System.out.println(&#34;Group third: &#34; + m.group(&#34;third&#34;));
        } else {
            System.out.println(&#34;No match found&#34;);
        }
    }
}</code></pre></div><p>The comments are not part of the pattern, but are there to explain the pattern. They are ignored by the compiler.
But they are very useful to explain the pattern to others, or to yourself when you come back to the code after a while.</p></section><section class="doc-section level-2"><h3 id=_useful_web_sites>Useful web sites</h3><div class=ulist><ul><li><a href=https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html>Java Pattern class</a></li><li><a href=https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Matcher.html>Java Matcher class</a></li><li><a href=https://www.freeformatter.com/java-regex-tester.html>Java regex tester</a></li></ul></div></section></section></article></div><footer class="text-sm leading-6 mt-12 mb-5">Theme provided by <a class="text-pink-500 underline" href=https://github.com/FontysVenlo/sebi-theme target=_blank>SeBi Venlo</a></footer><div class="fixed z-20 top-[3.8125rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[19.5rem] py-10 px-8 overflow-y-auto hidden xl:block"><h5 id=toc-header class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-200">On this page</h5></div></div><div class="hidden lg:hidden fixed inset-0 z-10 bg-gray-900/50 dark:bg-gray-900/60" id=menu-backdrop></div></div><script src=/prc2/js/main.min.956966b3103878d329f9460daf829f6ad1d50fc9e24d20ff0c5d93a4006065df877564edc24b6a2a5182bf4387d13d9f960a1df6fc9d259d38cfb8e83509c999.js integrity="sha512-lWlmsxA4eNMp+UYNr4KfatHVD8niTSD/DF2TpABgZd+HdWTtwktqKlGCv0OH0T2flgod9vydJZ04z7joNQnJmQ==" crossorigin=anonymous></script>
<script src=/prc2/js/highlight.min.cd8091de05577194483fff730f723dc2379226a640ef117b33ad133cc3da2f690d95af8fc32186b11dc10628e66e325b33bee2bf443c98315905e50f22aecc50.js integrity="sha512-zYCR3gVXcZRIP/9zD3I9wjeSJqZA7xF7M60TPMPaL2kNla+PwyGGsR3BBijmbjJbM77iv0Q8mDFZBeUPIq7MUA==" crossorigin=anonymous defer></script><div id=copied-alert class="invisible opacity-0 transition-all ease-in-out duration-400 fixed bottom-3 right-10 z-50 flex p-4 mb-4 text-sm text-gray-800 bg-gray-200 rounded-lg dark:bg-gray-500 dark:text-gray-200" role=alert><svg class="inline flex-shrink-0 mr-3 w-5 h-5" viewBox="0 0 24 24" width="24" height="24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg><div><span class=font-medium>Code copied</span></div></div></body></html>